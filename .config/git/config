# Git config file

[alias]
	# Print current branch name
	br = rev-parse --abbrev-ref HEAD
	# Print branches, sorted by date
	branches-by-date = branch --format='%(creatordate:short) %(refname:short) %(contents:subject)' --sort=creatordate
	# Delete local branches that have been merged to master
	branch-cleanup = ! git branch --merged master | grep -v master | xargs git branch -d
	# Print tags, sorted by date
	tags-by-date = tag --format='%(creatordate:short) %(refname:short)' --sort=creatordate

	# Work with GitHub pull requests
	pr-init = "! git config --replace-all remote.origin.fetch '+refs/pull/*/head:refs/remotes/origin/pull/*' '^\\+refs/pull/\\*/head:refs/remotes/origin/pull/\\*$' && git fetch origin"
	# Check out pull request
	pr = "! git pr-init 2>/dev/null && git checkout pull/$1 && git config --replace-all branch.pull/$1.merge refs/pull/$1/head"
	# List pull request branches
	prs = "! git pr-init 2>/dev/null && git branch -a --list 'origin/pull/*' --format='%(refname:short)' --sort=creatordate | cut -d/ -f2,3"

[diff]
	# Omit a/b prefix so that find-file-at-point works
	noprefix = true

[github]
	user = svend

[hub]
	protocol = https

[merge]
	tool = ediff

[mergetool "ediff"]
	cmd = emacsclient -c -a \"\" --eval \"(ediff-merge-files-with-ancestor \\\"$LOCAL\\\" \\\"$REMOTE\\\" \\\"$BASE\\\" nil \\\"$MERGED\\\")\"

[pull]
	ff = only

[tag]
	sort = version:refname

[url "git@github.com:"]
	pushInsteadOf = https://github.com/

[url "git@gist.github.com:"]
	pushInsteadOf = https://gist.github.com/

[url "ssh://git@git.zx2c4.com/"]
	pushInsteadOf = https://git.zx2c4.com/

[user]
	name = Svend Sorensen
	email = svend@svends.net

# This include must come last
[include]
	path = config.local
